# CODE BELOW DOES NOT WORK BUT JUST EXAMPLE OF WHAT TESTING LOOKS LIKE WITH AWS AND MOTO

import json
import unittest
import boto3
from moto import mock_s3

S3_BUCKET_NAME = 'raw-data-staging-sjb'
DEFAULT_REGION = 'us-east-1'

S3_TEST_FILE_KEY = 'customer/new_prices.json'
S3_TEST_FILE_CONTENT = [
    {"product": "Apple", "price": 15},
    {"product": "Orange", "price": 25}
]

@mock_s3
class TestLambdaFunction(unittest.TestCase):

    def setUp(self):
        self.s3 = boto3.resource('s3', region_name=DEFAULT_REGION)
        self.s3_bucket = self.s3.create_bucket(Bucket=S3_BUCKET_NAME)
        self.s3_bucket.put_object(Key=S3_TEST_FILE_KEY,
                                  Body=json.dumps(S3_TEST_FILE_CONTENT))

    def test_get_data_from_file(self):
        from index import get_data_from_file

        file_content = get_data_from_file(S3_BUCKET_NAME, S3_TEST_FILE_KEY)
        self.assertEqual(file_content, S3_TEST_FILE_CONTENT)